<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">


<!-- html generated by pub-server from markdown /027 Links.md -->

<title>Links</title>
<link rel="stylesheet" href="./css/github-markdown-light.css">
<link rel="stylesheet" href="./css/pub-theme-doc.css">
<link rel="stylesheet" href="./css/prism.css">
<link rel="stylesheet" href="./css/font-awesome.css">
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>

<div data-render-layout="main-layout">
<header>
<div id="doctitle"><h1 id="pub-server"><a href="./">pub-server</a></h1>
<p>documentation</p>
</div>
<div id="topmenu"><ul>
<li><a href="https://github.com/jldec/pub-server" title="github"><span class="fa fa-lg fa-fw">&#xf09b;</span></a></li>
</ul>
</div>
</header>

<div id="navicon" onclick=""><p><span class="fa fa-fw fa-lg">&#xf0c9;</span></p>

<nav id="toc">
<ul>
<li><a href="./">Introduction</a></li>
<li><a href="./how-it-works">How it works</a></li>
<li><a href="./installation">Installation</a></li>
<li><a href="./simple-doc-site">Simple doc site</a></li>
<li><a href="./configuration">Configuration</a></li>
<li><a href="./packages-and-themes">Packages and Themes</a></li>
<li><a href="./sources">Sources</a></li>
<li><a href="./outputs">Outputs</a></li>
<li><a href="./static-files">Static Files</a></li>
<li><a href="./browser-scripts">Browser Scripts</a></li>
<li><a href="./generator-plugins">Generator Plugins</a></li>
<li><a href="./server-plugins">Server Plugins</a></li>
<li><a href="./web-server-configuration">Web Server Configuration</a></li>
<li><a href="./the-page-model">The Page Model</a></li>
<li><a href="./links">Links</a></li>
<li><a href="./command-line">Command line</a></li>
<li><a href="./helpers">Helpers</a></li>
<li><a href="./github-pages">GitHub Pages</a></li>
</ul>
</nav>
</div>

<div id="main" onclick="">
<div id="content" class="markdown-body">
<div data-render-page="/links">
<div data-render-html="/links"><h1 id="links">Links</h1>
<p>For content maintained in markdown, it is important not to have to worry about where that content is going to be hosted, or even which level of the site the content will live on, relative to other pages on the site.</p>
<p>For this reason all links inside the markdown should use a simple &quot;rooted path&quot; convention both for specifying the urls of pages, and for referencing other pages via links inside the markdown. Rooted paths start with &#39;/&#39; for the index page, and continue in a typical hierarchy below that. E.g.</p>
<pre><code>/products/vendor-name/product-name
</code></pre>
<h2 id="generating-static-html-with-links">Generating static HTML with links</h2>
<p>Generating links for static HTML pages can be challenging, especially if the site is being hosted in a subdirectory on the server or if image links need to be rewritten to use a separate CDN endpoint.</p>
<p>E.g Content inside page1 may refer to page2 using a path like <code>/path/to/page2</code> but this will break if the running site lives at a url like <code>https://me.github.io/website-root/</code></p>
<p>There are two approaches to solving this - both are automatable but ugly.</p>
<ol>
<li>auto-prefix links with a root path like <code>/website-root/path/to/page2</code></li>
<li>auto-prefix links with relative paths like &#39;../../path/to/page2&#39;</li>
</ol>
<p>The current version of pub-server supports the 2nd approach to auto-prefix links originating in markdown with the correct relative paths. In <code>pub-config</code> this is configured per-output as follows:</p>
<pre><code class="language-js"><span class="token literal-property property">outputs</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'./out'</span><span class="token punctuation">,</span>   <span class="token comment">// configure output directory</span>
  <span class="token literal-property property">relPaths</span><span class="token operator">:</span> <span class="token boolean">true</span>   <span class="token comment">// auto-prefix links with relative paths</span>
<span class="token punctuation">}</span>
</code></pre>
<p>E.g if a markdown page <code>/posts/year/month/day.html</code> includes an image at <code>/static/images/me.jpg</code>, the generated img src will point to <code>../../../static/images/me.jpg</code>.</p>
<p>One benefit of using this approach is that the resulting tree of static html files can be hosted at any level. No prior knowledge of the destination directory name is required when the site is generated. This can be helpful for testing or cloning sites.</p>
<h2 id="links-to-directories-and-trailing-">Links to directories and trailing /</h2>
<p>Unlike a file system, it is quite normal to have pages on a website with URLs which look like links to directories in the URL hierarchy. E.g. <code>/products/vendor-name/</code> may return a page about the vendor, and then each child page in the hierarchy could be a product from that vendor.</p>
<p>This raises the question of whether or not to include the trailing <code>/</code> in the URL at the directory level, and what to return when users browse to a URL without the <code>/</code>.</p>
<blockquote>
<p>Github Pages will automatically 301-redirect from the URL without the trailing &#39;/&#39; to the URL with the trailing &#39;/&#39; if there is a directory with that name, and it has an index.html file.</p>
</blockquote>
<p>This means that if you are targeting Github Pages and you have directories in your site hierarchy, use the trailing &#39;/&#39; for naming those pages and for links pointing to those pages to avoid sending users to pages with redirects.</p>
<p>Pages which are NOT directories generally don&#39;t have a trailing &#39;/&#39;.</p>
<p>If you prefer you can even omit the trailing &#39;/&#39; on URLs which are directories. When pub-server generates static HTML output files, it will automatically figure out when to generate directories containing an index.html file, and when it can simply use a file called <code>&lt;directory-name&gt;.html</code> for the page.</p>
<p><em>NOTE: Using the trailing &#39;/&#39; also affects the way browsers interpret relative links, since they effectively add another level to the hierarchy. E.g. a link like &#39;./pagename&#39; will mean something different if it occurs inside the HTML of a page at &#39;/directory&#39; vs. a page at &#39;/directory/&#39;.  When pub-server is generating output with <code>relPaths</code>, it will figure out the right level for either case.</em></p>
<h2 id="links-in-templates">Links in templates</h2>
<p>Templates may include links to CSS stylesheets etc. For these to receive the same treatment as links in markdown the <code>{{relPath}}</code> helper should be used in front of the link e.g.</p>
<pre><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>icon<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{relPath}}/img/favicon.ico<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/x-icon<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
</code></pre>
<p>If the output has been configured with <code>relPaths:true</code>, this <code>{{relPath}}</code> helper will insert a &#39;./&#39; or the correct number of levels of <code>../../</code> etc.</p>
<h2 id="publishing-with-links-to-filesimages-on-another-server">Publishing with links to files/images on another server</h2>
<p>A site may have links to assets in the local filesystem during development, but those links are then converted to fully qualified links on a different server when the site is published.</p>
<p>This may be configured using output configuration settings as follows.</p>
<pre><code class="language-js"><span class="token literal-property property">outputs</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'./out'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">relPaths</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>

  <span class="token comment">// don't copy assets under /assets to /out</span>
  <span class="token literal-property property">omitRoutes</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'/assets'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

  <span class="token comment">// prefix /assets... with the specified url</span>
  <span class="token literal-property property">fqImages</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">route</span><span class="token operator">:</span><span class="token string">'/assets'</span><span class="token punctuation">,</span> <span class="token literal-property property">url</span><span class="token operator">:</span><span class="token string">'https://assets.example.com'</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>These settings will auto-prefix any markdown links matching <code>fqImages.route</code> with the specified <code>fqImages.url</code> during conversion from markdown to HTML.</p>
<p>The same is made possible for links inside templates by wrapping the hardwired local paths with a <code>{{fixPath &lt;path&gt;}}</code> helper.</p>
<p>E.g.</p>
<pre><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{fixPath <span class="token punctuation">'</span>/assets/document-abc.pdf<span class="token punctuation">'</span>}}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Download<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
</code></pre>
</div>

</div><!--page-->
</div>
<div id="credit"><p><span class="fa">&#xf004;</span> powered by <a href="https://jldec.github.io/pub-doc/">pub-server</a> and <a href="https://github.com/jldec/pub-theme-doc">pub-theme-doc</a></p>
</div>
</div>

</div><!--layout-->

<script>window.pubRef = {"href":"/links","relPath":"."};</script>
<script src="./js/jquery-1.12.4.min.js" ></script>
<script src="./pub/pub-ux.js" ></script>
<!-- Copyright (c) 2015-2022 Jürgen Leschner - github.com/jldec - MIT license -->
</body>
</html>
